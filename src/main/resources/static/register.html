<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Registration - Movie Ticket Booking</title>
    <link rel="stylesheet" href="/css/register.css">
</head>
<body>
<header class="navbar">
    <div class="logo">
        <span class="scope">MOVIE</span><br> VAULT
    </div>
    <nav>
        <a href="index.html">HOME</a>
        <a href="movies.html">MOVIES</a>
        <a href="#">DEALS AND EXCLUSIVES</a>
        <a href="#">ADVERTISE</a>
        <a href="#" class="buy-tickets">BUY TICKETS</a>
        <a href="/login.html">LOGIN</a>
    </nav>
</header>
<main>
    <div class="register-title">
        <h1>BECOME A MEMBER - Skip the line </h1>
        <div class="breadcrumb">HOME / REGISTRATION</div>
    </div>
    <div class="registration-form-container">
        <form class="registration-form" action="/register" method="post" autocomplete="off">
            <label>
                <input type="text" name="firstName" placeholder="First Name" required>
                <span class="required">*</span>
            </label>
            <label>
                <input type="text" name="lastName" placeholder="Last Name" required>
                <span class="required">*</span>
            </label>
            <label>
                <input type="email" name="email" placeholder="Email Address" required>
                <span class="required">*</span>
            </label>
            <div class="gender-row">
                <span>Gender</span>
                <label><input type="radio" name="gender" value="Male" required> Male</label>
                <label><input type="radio" name="gender" value="Female" required> Female</label>
                <span class="required">*</span>
            </div>
            <label>
                <input type="text" name="nic" placeholder="NIC Number" required>
                <span class="required">*</span>
            </label>
            <label>
                <input type="text" name="address" placeholder="Address" required>
                <span class="required">*</span>
            </label>
            <label>
                <span class="mobile-prefix">07</span>
                <input type="text" name="mobile" placeholder="Mobile Number" required pattern="[0-9]{8}" maxlength="8" style="width:85%;">
                <span class="required">*</span>
            </label>
            <label>
                <input type="password" name="password" placeholder="Password" required>
                <span class="required">*</span>
            </label>
            <label>
                <input type="password" name="confirmPassword" placeholder="Confirm Password" required>
                <span class="required">*</span>
            </label>
            <button type="submit" class="register-btn">CREATE</button>
        </form>
        <div id="regMessage" style="color:#ff6b6b; text-align:center; margin:1em 0;"></div>
    </div>
</main>

<script>
    // Password match check
    document.querySelector('.registration-form').addEventListener('submit', function(e) {
        const pw = this.password.value;
        const cpw = this.confirmPassword.value;
        if (pw !== cpw) {
            alert("Passwords do not match!");
            e.preventDefault();
            return false;
        }
    });

    // Show registration result message
    const params = new URLSearchParams(window.location.search);
    if (params.get('registered') === 'success') {
        document.getElementById('regMessage').textContent = "Registration successful! Please log in.";
        document.getElementById('regMessage').style.color = "#28a745";
    }
    if (params.get('error') === 'exists') {
        document.getElementById('regMessage').textContent = "This email is already registered.";
    }
    if (params.get('error') === 'system') {
        document.getElementById('regMessage').textContent = "Registration failed due to a server error. Please try again.";
    }
</script>
</body>
</html>
